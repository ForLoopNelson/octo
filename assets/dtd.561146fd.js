var r;function a(e,t){return r=t,e}function l(e,t){var u,n=e.next();if(n!="<"||!e.eat("!")){if(n=="<"&&e.eat("?"))return t.tokenize=function(i,o){for(;!i.eol();){if(i.match("?>")){o.tokenize=l;break}i.next()}return"meta"},a("meta",n);if(n=="#"&&e.eatWhile(/[\w]/))return a("atom","tag");if(n=="|")return a("keyword","separator");if(n.match(/[\(\)\[\]\-\.,\+\?>]/))return a(null,n);if(n.match(/[\[\]]/))return a("rule",n);if(n=='"'||n=="'")return t.tokenize=(u=n,function(i,o){for(var s,k=!1;(s=i.next())!=null;){if(s==u&&!k){o.tokenize=l;break}k=!k&&s=="\\"}return a("string","tag")}),t.tokenize(e,t);if(e.eatWhile(/[a-zA-Z\?\+\d]/)){var c=e.current();return c.substr(c.length-1,c.length).match(/\?|\+/)!==null&&e.backUp(1),a("tag","tag")}return n=="%"||n=="*"?a("number","number"):(e.eatWhile(/[\w\\\-_%.{,]/),a(null,null))}return e.eatWhile(/[\-]/)?(t.tokenize=g,g(e,t)):e.eatWhile(/[\w]/)?a("keyword","doindent"):void 0}function g(e,t){for(var u,n=0;(u=e.next())!=null;){if(n>=2&&u==">"){t.tokenize=l;break}n=u=="-"?n+1:0}return a("comment","comment")}const h={startState:function(){return{tokenize:l,baseIndent:0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;var u=t.tokenize(e,t),n=t.stack[t.stack.length-1];return e.current()=="["||r==="doindent"||r=="["?t.stack.push("rule"):r==="endtag"?t.stack[t.stack.length-1]="endtag":e.current()=="]"||r=="]"||r==">"&&n=="rule"?t.stack.pop():r=="["&&t.stack.push("["),u},indent:function(e,t,u){var n=e.stack.length;return t.charAt(0)==="]"?n--:t.substr(t.length-1,t.length)===">"&&(t.substr(0,1)==="<"||r=="doindent"&&t.length>1||(r=="doindent"?n--:r==">"&&t.length>1||r=="tag"&&t!==">"||(r=="tag"&&e.stack[e.stack.length-1]=="rule"?n--:r=="tag"?n++:t===">"&&e.stack[e.stack.length-1]=="rule"&&r===">"?n--:t===">"&&e.stack[e.stack.length-1]=="rule"||(t.substr(0,1)!=="<"&&t.substr(0,1)===">"?n-=1:t===">"||(n-=1)))),r!=null&&r!="]"||n--),e.baseIndent+n*u.unit},languageData:{indentOnInput:/^\s*[\]>]$/}};export{h as dtd};
