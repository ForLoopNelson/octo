function F(i){return new RegExp("^(("+i.join(")|(")+"))\\b")}var U=F(["and","or","not","is"]),D=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],I=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];function p(i){return i.scopes[i.scopes.length-1]}function N(i){for(var b="error",Z=i.delimiters||i.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,k=[i.singleOperators,i.doubleOperators,i.doubleDelimiters,i.tripleDelimiters,i.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],v=0;v<k.length;v++)k[v]||k.splice(v--,1);var _=i.hangingIndent,g=D,y=I;i.extra_keywords!=null&&(g=g.concat(i.extra_keywords)),i.extra_builtins!=null&&(y=y.concat(i.extra_builtins));var T=!(i.version&&Number(i.version)<3);if(T){var x=i.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;g=g.concat(["nonlocal","False","True","None","async","await"]),y=y.concat(["ascii","bytes","exec","print"]);var L=new RegExp(`^(([rbuf]|(br)|(fr))?('{3}|"{3}|['"]))`,"i")}else x=i.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/,g=g.concat(["exec","print"]),y=y.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]),L=new RegExp(`^(([rubf]|(ur)|(br))?('{3}|"{3}|['"]))`,"i");var C=F(g),R=F(y);function O(e,n){var c=e.sol()&&n.lastToken!="\\";if(c&&(n.indent=e.indentation()),c&&p(n).type=="py"){var o=p(n).offset;if(e.eatSpace()){var a=e.indentation();return a>o?E(e,n):a<o&&S(e,n)&&e.peek()!="#"&&(n.errorToken=!0),null}var t=z(e,n);return o>0&&S(e,n)&&(t+=" error"),t}return z(e,n)}function z(e,n,c){if(e.eatSpace())return null;if(!c&&e.match(/^#.*/))return"comment";if(e.match(/^[0-9\.]/,!1)){var o=!1;if(e.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(o=!0),e.match(/^[\d_]+\.\d*/)&&(o=!0),e.match(/^\.\d+/)&&(o=!0),o)return e.eat(/J/i),"number";var a=!1;if(e.match(/^0x[0-9a-f_]+/i)&&(a=!0),e.match(/^0b[01_]+/i)&&(a=!0),e.match(/^0o[0-7_]+/i)&&(a=!0),e.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(e.eat(/J/i),a=!0),e.match(/^0(?![\dx])/i)&&(a=!0),a)return e.eat(/L/i),"number"}if(e.match(L))return e.current().toLowerCase().indexOf("f")!==-1?(n.tokenize=function(l,d){for(;"rubf".indexOf(l.charAt(0).toLowerCase())>=0;)l=l.substr(1);var h=l.length==1,u="string";function f(r){return function(m,w){var A=z(m,w,!0);return A=="punctuation"&&(m.current()=="{"?w.tokenize=f(r+1):m.current()=="}"&&(w.tokenize=r>1?f(r-1):s)),A}}function s(r,m){for(;!r.eol();)if(r.eatWhile(/[^'"\{\}\\]/),r.eat("\\")){if(r.next(),h&&r.eol())return u}else{if(r.match(l))return m.tokenize=d,u;if(r.match("{{"))return u;if(r.match("{",!1))return m.tokenize=f(0),r.current()?u:m.tokenize(r,m);if(r.match("}}"))return u;if(r.match("}"))return b;r.eat(/['"]/)}if(h){if(i.singleLineStringErrors)return b;m.tokenize=d}return u}return s.isString=!0,s}(e.current(),n.tokenize),n.tokenize(e,n)):(n.tokenize=function(l,d){for(;"rubf".indexOf(l.charAt(0).toLowerCase())>=0;)l=l.substr(1);var h=l.length==1,u="string";function f(s,r){for(;!s.eol();)if(s.eatWhile(/[^'"\\]/),s.eat("\\")){if(s.next(),h&&s.eol())return u}else{if(s.match(l))return r.tokenize=d,u;s.eat(/['"]/)}if(h){if(i.singleLineStringErrors)return b;r.tokenize=d}return u}return f.isString=!0,f}(e.current(),n.tokenize),n.tokenize(e,n));for(var t=0;t<k.length;t++)if(e.match(k[t]))return"operator";return e.match(Z)?"punctuation":n.lastToken=="."&&e.match(x)?"property":e.match(C)||e.match(U)?"keyword":e.match(R)?"builtin":e.match(/^(self|cls)\b/)?"self":e.match(x)?n.lastToken=="def"||n.lastToken=="class"?"def":"variable":(e.next(),c?null:b)}function E(e,n){for(;p(n).type!="py";)n.scopes.pop();n.scopes.push({offset:p(n).offset+e.indentUnit,type:"py",align:null})}function S(e,n){for(var c=e.indentation();n.scopes.length>1&&p(n).offset>c;){if(p(n).type!="py")return!0;n.scopes.pop()}return p(n).offset!=c}return{startState:function(){return{tokenize:O,scopes:[{offset:0,type:"py",align:null}],indent:0,lastToken:null,lambda:!1,dedent:0}},token:function(e,n){var c=n.errorToken;c&&(n.errorToken=!1);var o=function(a,t){a.sol()&&(t.beginningOfLine=!0,t.dedent=!1);var l,d,h,u,f=t.tokenize(a,t),s=a.current();if(t.beginningOfLine&&s=="@")return a.match(x,!1)?"meta":T?"operator":b;if(/\S/.test(s)&&(t.beginningOfLine=!1),f!="variable"&&f!="builtin"||t.lastToken!="meta"||(f="meta"),s!="pass"&&s!="return"||(t.dedent=!0),s=="lambda"&&(t.lambda=!0),s==":"&&!t.lambda&&p(t).type=="py"&&a.match(/^\s*(?:#|$)/,!1)&&E(a,t),s.length==1&&!/string|comment/.test(f)){var r="[({".indexOf(s);if(r!=-1&&(l=a,d=t,h="])}".slice(r,r+1),u=l.match(/^[\s\[\{\(]*(?:#|$)/,!1)?null:l.column()+1,d.scopes.push({offset:d.indent+(_||l.indentUnit),type:h,align:u})),(r="])}".indexOf(s))!=-1){if(p(t).type!=s)return b;t.indent=t.scopes.pop().offset-(_||a.indentUnit)}}return t.dedent&&a.eol()&&p(t).type=="py"&&t.scopes.length>1&&t.scopes.pop(),f}(e,n);return o&&o!="comment"&&(n.lastToken=o=="keyword"||o=="punctuation"?e.current():o),o=="punctuation"&&(o=null),e.eol()&&n.lambda&&(n.lambda=!1),c?b:o},indent:function(e,n,c){if(e.tokenize!=O)return e.tokenize.isString?null:0;var o=p(e),a=o.type==n.charAt(0)||o.type=="py"&&!e.dedent&&/^(else:|elif |except |finally:)/.test(n);return o.align!=null?o.align-(a?1:0):o.offset-(a?_||c.unit:0)},languageData:{autocomplete:D.concat(I),indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,commentTokens:{line:"#"},closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""']}}}}const $=N({}),j=N({extra_keywords:"by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE".split(" ")});export{j as cython,N as mkPython,$ as python};
