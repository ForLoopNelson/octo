var p=Object.defineProperty,v=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var d=(t,s,e)=>s in t?p(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,u=(t,s)=>{for(var e in s||(s={}))C.call(s,e)&&d(t,e,s[e]);if(c)for(var e of c(s))b.call(s,e)&&d(t,e,s[e]);return t},m=(t,s)=>v(t,x(s));import{h as w}from"./moment.08a7f518.js";import{n as g,D as y,R as k,M as _,o as D}from"./index.6f8da31a.js";var M=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shadow relative flex flex-col min-w-0 rounded text-sm overflow-hidden cursor-pointer bg-gray-100 dark:bg-gray-800 dark:text-gray-300"},[e("div",{staticClass:"flex-grow flex-shrink overflow-hidden p-4"},[e("pre",[t._v(t._s(t.text))])]),e("div",{staticClass:"flex items-center justify-between p-4 bg-gray-200 dark:bg-gray-900"},[e("p",{staticClass:"text-gray-500"},[t._v(t._s(t.updated))]),e("div",[t.discardedAt?e("button",{staticClass:"destroy button-flat button-size-medium text-sm bg-gray-200 hover:bg-gray-300 dark:bg-gray-900 dark:hover:bg-gray-800",on:{click:function(i){return i.stopPropagation(),t.restore.apply(null,arguments)}}},[e("svg",{attrs:{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})]),e("span",{staticClass:"ml-2"},[t._v("Restore")])]):e("button",{staticClass:"destroy button-flat button-size-medium text-sm text-red-500 bg-gray-200 dark:bg-gray-900 hover:bg-gray-300 dark:hover:bg-gray-800",on:{click:function(i){return i.stopPropagation(),t.discard.apply(null,arguments)}}},[e("svg",{attrs:{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}})]),e("span",{staticClass:"ml-2"},[t._v("Discard")])])])])])},E=[];const R={name:"Document",props:{id:String,text:String,updatedAt:Date,discardedAt:Date},computed:{updated(){return`Updated on ${w(this.updatedAt).format("ddd, MMM Do, YYYY [at] h:mm A")}`}},methods:{discard(){this.$store.dispatch(y,{id:this.id})},restore(){this.$store.dispatch(k,{id:this.id})}}},h={};var A=g(R,M,E,!1,$,null,null,null);function $(t){for(let s in h)this[s]=h[s]}var T=function(){return A.exports}(),j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"flex flex-col w-full"},[e("div",{staticClass:"flex items-center text-2xl"},[t.tag?e("div",{staticClass:"flex items-center"},[e("svg",{attrs:{height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"}})]),e("span",{staticClass:"ml-3 flex-grow"},[t._v(t._s(t.tag))])]):e("span",{staticClass:"action capitalize"},[t._v(t._s(t.action))])]),e("div",{staticClass:"my-4"},[e("div",{staticClass:"flex align-items-bottom"},[e("div",{staticClass:"flex-grow"},[e("div",{staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterText,expression:"filterText"}],ref:"input",staticClass:"form-text w-full shadow",attrs:{type:"text",placeholder:"Start typing to filter the list...",autocomplete:"off"},domProps:{value:t.filterText},on:{input:function(i){i.target.composing||(t.filterText=i.target.value)}}}),e("label",{staticClass:"button button-size-medium button-color-gray shadow ml-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterRegex,expression:"filterRegex"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.filterRegex)?t._i(t.filterRegex,null)>-1:t.filterRegex},on:{change:function(i){var r=t.filterRegex,n=i.target,l=!!n.checked;if(Array.isArray(r)){var o=null,a=t._i(r,o);n.checked?a<0&&(t.filterRegex=r.concat([o])):a>-1&&(t.filterRegex=r.slice(0,a).concat(r.slice(a+1)))}else t.filterRegex=l}}}),e("span",{staticClass:"monospace ml-3"},[t._v(".*")])]),e("label",{staticClass:"button button-size-medium button-color-gray shadow ml-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterCase,expression:"filterCase"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.filterCase)?t._i(t.filterCase,null)>-1:t.filterCase},on:{change:function(i){var r=t.filterCase,n=i.target,l=!!n.checked;if(Array.isArray(r)){var o=null,a=t._i(r,o);n.checked?a<0&&(t.filterCase=r.concat([o])):a>-1&&(t.filterCase=r.slice(0,a).concat(r.slice(a+1)))}else t.filterCase=l}}}),e("span",{staticClass:"monospace ml-3"},[t._v("Aa")])])])])]),e("small",{staticClass:"block mt-2 text-gray-700"},[t._v(t._s(t.filterMessage))])]),e("div",{staticClass:"mb-4"},[e("button",{staticClass:"button button-size-medium button-color-gray shadow",on:{click:t.toggleIsEditing}},[t._v(t._s(t.isEditing?"Cancel":"Edit Documents"))]),t.canMerge?e("button",{staticClass:"button button-size-medium button-color-gray shadow ml-2",on:{click:t.mergeDocuments}},[t._v("Merge Documents")]):t._e()]),e("div",[t.isEditing?e("p",{staticClass:"text-gray-700"},[t._v("Select two or more documents to merge them together.")]):t._e()]),e("div",{staticClass:"grid gap-4 grid-cols-1",class:t.cols===2&&"lg:grid-cols-2"},[t._l(t.visibleDocuments,function(i){return e("div",{key:i.id,staticClass:"rounded relative cursor-pointer outline-none focus:ring",attrs:{tabindex:"0"},on:{keypress:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.selectDocument(i.id)},click:function(r){return t.selectDocument(i.id)}}},[e("Document",t._b({staticClass:"h-96"},"Document",i,!1)),i.selected?e("div",{staticClass:"flex items-center justify-center rounded absolute inset-0 bg-black bg-opacity-10 dark:bg-opacity-50"},[e("svg",{attrs:{height:"3em",width:"3em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})])]):t._e()],1)}),t.showLoadMore?e("div",{staticClass:"flex items-center justify-center rounded cursor-pointer"},[e("div",{staticClass:"button button-color-gray text-lg px-8 py-6",on:{click:t.loadMore}},[e("svg",{attrs:{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}})]),e("span",{staticClass:"ml-3"},[t._v("Load More")])])]):t._e()],2)])},z=[];const S={name:"DocumentList",props:{tag:String,actionable:Boolean,discarded:Boolean,recent:Boolean,untagged:Boolean,cols:{type:Number,default:2}},components:{Document:T},data(){return{filterCase:!1,filterRegex:!0,filterText:"",isEditing:!1,selectedDocuments:[],visibleCount:25}},computed:{action(){return this.tag?this.tag:this.actionable?"actionable":this.discarded?"discarded":this.recent?"recent":this.untagged?"untagged":"documents"},canMerge(){return this.selectedDocuments.length>1},documents(){return this.tag?this.$store.getters.withTag(this.tag):this.actionable?this.$store.getters.actionable:this.discarded?this.$store.getters.discarded:this.recent?this.$store.getters.kept:this.untagged?this.$store.getters.untagged:this.$store.getters.decrypted},filterMessage(){const t=this.filterCase?"sensitive":"insensitive",s=this.filterRegex?"regular expression":"plain text";return`Filtering documents with case ${t} ${s} queries.`},filteredDocuments(){return this.documents.filter(t=>this.filterText?this.filterRegex?new RegExp(this.filterText,this.filterCase?"":"i").test(t.text):this.filterCase?t.text.includes(this.filterText):t.text.toLowerCase().includes(this.filterText.toLowerCase()):!0)},finalDocuments(){return this.filteredDocuments.map(t=>m(u({},t),{selected:this.selectedDocuments.includes(t)}))},showLoadMore(){return this.visibleCount<=this.finalDocuments.length},visibleDocuments(){return this.finalDocuments.slice(0,this.visibleCount)}},methods:{loadMore(){this.visibleCount+=25},mergeDocuments(){this.$store.dispatch(_,this.selectedDocuments),this.selectedDocuments=[]},toggleIsEditing(){this.isEditing=!this.isEditing,this.isEditing||(this.selectedDocuments=[])},selectDocument(t){this.isEditing?this.selectedDocuments.find(s=>s.id===t)?this.selectedDocuments=this.selectedDocuments.filter(s=>s.id!==t):this.selectedDocuments.push(this.filteredDocuments.find(s=>s.id===t)):D({name:"document",params:{id:t}})}},mounted(){this.$refs.input.focus()}},f={};var B=g(S,j,z,!1,L,null,null,null);function L(t){for(let s in f)this[s]=f[s]}var V=function(){return B.exports}();export{V as D};
